var TE=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!o.test(e))return e;return e.replace(a,r)},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},a=/[&<>"'`=]/g,o=/[&<>"'`=]/;function r(e){return i[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString;t.toString=l;var u=function(e){return"function"==typeof e};u(/x/)&&(t.isFunction=u=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=u;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=c},function(e,t,n){"use strict";t.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];function a(e,t){var n=t&&t.loc,o=void 0,r=void 0;n&&(e+=" - "+(o=n.start.line)+":"+(r=n.start.column));for(var s=Error.prototype.constructor.call(this,e),l=0;l<i.length;l++)this[i[l]]=s[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,a);try{n&&(this.lineNumber=o,Object.defineProperty?Object.defineProperty(this,"column",{value:r,enumerable:!0}):this.column=r)}catch(e){}}a.prototype=new Error,t.default=a,e.exports=t.default},function(e,t,n){e.exports=n(7).default},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=u;var a=n(0),o=i(n(1)),r=n(8),s=n(16),l=i(n(18));t.VERSION="4.1.1";t.COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function u(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},r.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===a.toString.call(e)){if(t)throw new o.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===a.toString.call(e))a.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===a.toString.call(e)){if(t)throw new o.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var c=l.default.log;t.log=c,t.createFrame=a.createFrame,t.logger=l.default},function(e,t,n){n(6);const i=n(22),a=n(23);n(24);let o;$(".croppie-file-input").on("change",e=>{if($(".croppie-file-input")[0].files[0]){console.log("Image found in input field");const e=$(".croppie-file-input")[0].files[0],t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){o||(o=$("#croppie").croppie({viewport:{width:210,height:280},boundary:{width:300,height:300}})),o.croppie("bind",{url:this.result})}}else console.log("No file found in input field")}),$(".croppie-file-input-modal").on("change",e=>{if($(".croppie-file-input-modal")[0].files[0]){console.log("Image found in input field");const e=$(".croppie-file-input-modal")[0].files[0],t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){o||(o=$("#croppie").croppie({viewport:{width:250,height:250},boundary:{width:300,height:300}})),o.croppie("bind",{url:this.result})}}else console.log("No file found in input field")}),$("#crop-profile-picture").on("click",function(){o?(console.log("Cropping image"),o.croppie("result",{type:"base64",format:"jpg",size:{width:300,height:300}}).then(e=>{$(".profile-img").attr("src",e),fetch("/user/image",{method:"POST",body:JSON.stringify({image_base64:e.split(",")[1],old_image_path:TE.userData.image_path}),headers:{"Content-Type":"application/json"}}).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),"ok"==e.status?(TE.userData.image_path=e.new_image_path,M.toast({html:"Successfully updated!",classes:"light-green darken-1"})):"failed"==e.status&&M.toast({html:"Something went wrong",classes:"red darken-1"})})})):console.log("No croppie object found")});e.exports={signupUser:e=>{const t=e.parentNode.parentNode.parentNode,n={firstname:t.querySelector("[name=firstname]").value,lastname:t.querySelector("[name=lastname]").value,email:t.querySelector("[name=email]").value,password:t.querySelector("[name=password]").value,repeatpassword:t.querySelector("[name=repeat_password]").value};if(""!==n.email)if(""!==n.password){if(n.password!==n.repeatpassword){M.toast({html:"Passwords are not equal",classes:"red darken-1"}),a=$("[name=password]")[0];var i=$("[name=repeat_password]")[0];return $(a).addClass("invalid"),void $(i).addClass("invalid")}$(e).toggleClass("disabled"),$(".signup-loading").css("visibility","visible"),fetch("/signup",{method:"POST",body:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>e.json()).then(t=>{if("ok"==t.status)M.toast({html:"Success!",classes:"light-green darken-1"}),$(".signup-loading").css("visibility","hidden"),setTimeout(()=>window.location.replace("/dashboard"),1e3);else if("failed"==t.status){M.toast({html:"Email address already in use",classes:"red darken-1"});var n=$("[name=email]")[0];$(n).addClass("invalid"),$(e).toggleClass("disabled"),$(".login-loading").css("visibility","hidden")}}).catch(e=>{console.log(e)})}else{M.toast({html:"Please provide a password",classes:"red darken-1"});var a=$("[name=password]")[0];$(a).addClass("invalid")}else{M.toast({html:"Please provide an email",classes:"red darken-1"});var o=$("[name=email]")[0];$(o).addClass("invalid")}},logInUser:e=>{const t=e.parentNode.parentNode.parentNode,n={email:t.querySelector("[name=email]").value,password:t.querySelector("[name=password]").value};if(""!==n.email)if(""!==n.password)$(e).toggleClass("disabled"),$(".login-loading").css("visibility","visible"),fetch("/login",{method:"POST",redirect:"follow",body:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>e.redirected?window.location.replace(e.url):e.json()).then(t=>{"failed"==t.status&&(M.toast({html:t.message,classes:"red darken-1"}),$(".login-loading").css("visibility","hidden"),$(e).toggleClass("disabled"))}).catch(e=>{console.log(e)});else{M.toast({html:"Please provide a password",classes:"red darken-1"});var i=$("[name=password]")[0];$(i).addClass("invalid")}else{M.toast({html:"Please provide an email",classes:"red darken-1"});var a=$("[name=email]")[0];$(a).addClass("invalid")}},addRecipe:e=>{const t=e.parentNode.parentNode.parentNode,n={title:t.querySelector("[name=title]").value,description:t.querySelector("[name=description]").value,recipe:t.querySelector("[name=recipe]").value,image_name:"",image_base64:""};return $(".croppie-file-input")[0].files[0]?(console.log($(".croppie-file-input")[0].files[0]),n.image_name=$(".croppie-file-input")[0].files[0].name,""==n.title||""==n.description||""==n.recipe?M.toast({html:"Please fill in all input fields",classes:"red darken-1"}):o?void o.croppie("result",{type:"base64",format:"jpg",size:{width:300,height:400}}).then(e=>{n.image_base64=e.split(",")[1],$("body").append('<div class="loader-container">\n                                    <div class="loader"></div>\n                                </div>'),fetch(window.location.origin+"/recipe",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(e=>{if(console.log(e),e.redirected)return window.location.replace(e.url)})}):M.toast({html:"Please upload a photo",classes:"red darken-1"})):M.toast({html:"Please upload a photo",classes:"red darken-1"})},getUserRecipes:()=>{fetch(window.location.origin+"/recipe/user",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{const t=i(e);$("#recipe-loader").remove(),$("#recipe-container").append(t)})},getUserData:()=>{fetch(window.location.origin+"/user",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{TE.userData=e,$("#modal-details-update").find("[name=firstname]").attr("value",e.firstname),$("#modal-details-update").find("[name=lastname]").attr("value",e.lastname),$("#modal-details-update").find("[name=email]").attr("value",e.email),M.updateTextFields();const t=a(e);$("#user-loader").remove(),$("#user-container").append(t)})},updateUserData:()=>{const e={firstname:$("#modal-details-update").find("[name=firstname]")[0].value,lastname:$("#modal-details-update").find("[name=lastname]")[0].value,email:$("#modal-details-update").find("[name=email]")[0].value};TE.userData.firstname=e.firstname,TE.userData.lastname=e.lastname,TE.userData.email=e.email;const t=a(TE.userData);$("#user-container").children().last().remove(),$("#user-container").append(t),fetch(window.location.origin+"/user",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e)})}}},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var o;return"\r\n<h1>"+e.escapeExpression("function"==typeof(o=null!=(o=n.name||(null!=t?t.name:t))?o:n.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:a}):o)+"</h1>\r\n<p>This is working!</p>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var o;return null!=(o=n.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?o:""},useData:!0})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var o=a(n(4)),r=i(n(19)),s=i(n(1)),l=a(n(0)),u=a(n(20)),c=i(n(21));function d(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=r.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var p=d();p.create=d,c.default(p),p.default=p,t.default=p,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){a.default(e),o.default(e),r.default(e),s.default(e),l.default(e),u.default(e),c.default(e)};var a=i(n(9)),o=i(n(10)),r=i(n(11)),s=i(n(12)),l=i(n(13)),u=i(n(14)),c=i(n(15))},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return a(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var r=i.createFrame(n.data);r.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:r}}return o(t,n)})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,a=n(0),o=n(1),r=(i=o)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new r.default("Must pass iterator to #each");var n=t.fn,i=t.inverse,o=0,s="",l=void 0,u=void 0;function c(t,i,o){l&&(l.key=t,l.index=i,l.first=0===i,l.last=!!o,u&&(l.contextPath=u+t)),s+=n(e[t],{data:l,blockParams:a.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(l=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var d=e.length;o<d;o++)o in e&&c(o,o,o===e.length-1);else{var p=void 0;for(var h in e)e.hasOwnProperty(h)&&(void 0!==p&&c(p,o-1),p=h,o++);void 0!==p&&c(p,o-1,!0)}return 0===o&&(s=i(this)),s})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,a=n(1),o=(i=a)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("if",function(e,t){return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),t[0]=a,e.log.apply(e,t)})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("with",function(e,t){i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var a=t.data;return t.data&&t.ids&&((a=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:a,blockParams:i.blockParams([e],[a&&a.contextPath])})})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var i,a=n(17),o=(i=a)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerDecorator("inline",function(e,t,n,a){var o=e;return t.partials||(t.partials={},o=function(a,o){var r=n.partials;n.partials=i.extend({},r,t.partials);var s=e(a,o);return n.partials=r,s}),t.partials[a.args[0]]=a.fn,o})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];console[t].apply(console,i)}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t!==n){if(t<n){var i=s.REVISION_CHANGES[n],a=s.REVISION_CHANGES[t];throw new r.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new r.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new r.default("No environment passed to template");if(!e||!e.main)throw new r.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new r.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(n,i,o){o.hash&&(i=a.extend({},i,o.hash),o.ids&&(o.ids[0]=!0));n=t.VM.resolvePartial.call(this,n,i,o);var s=t.VM.invokePartial.call(this,n,i,o);null==s&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),s=o.partials[o.name](i,o));if(null!=s){if(o.indent){for(var l=s.split("\n"),u=0,c=l.length;u<c&&(l[u]||u+1!==c);u++)l[u]=o.indent+l[u];s=l.join("\n")}return s}throw new r.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,a){var o=this.programs[e],r=this.fn(e);return t||a||i||n?o=l(this,e,r,t,n,i,a):o||(o=this.programs[e]=l(this,e,r)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=a.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function i(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=a.data;i._setup(a),!a.partial&&e.useData&&(o=function(e,t){t&&"root"in t||((t=t?s.createFrame(t):{}).root=e);return t}(t,o));var r=void 0,l=e.useBlockParams?[]:void 0;function u(t){return""+e.main(n,t,n.helpers,n.partials,o,l,r)}return e.useDepths&&(r=a.depths?t!=a.depths[0]?[t].concat(a.depths):a.depths:[t]),(u=c(e.main,u,n,a.depths||[],o,l))(t,a)}return i.isTop=!0,i._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials,n.decorators=i.decorators):(n.helpers=n.merge(i.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=n.merge(i.decorators,t.decorators)))},i._child=function(t,i,a,o){if(e.useBlockParams&&!a)throw new r.default("must pass block params");if(e.useDepths&&!o)throw new r.default("must pass parent depths");return l(n,t,e[t],i,0,a,o)},i},t.wrapProgram=l,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;n.fn&&n.fn!==u&&function(){n.data=s.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=a.extend({},n.partials,e.partials))}();void 0===e&&o&&(e=o);if(void 0===e)throw new r.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=u;var i,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(1),r=(i=o)&&i.__esModule?i:{default:i},s=n(4);function l(e,t,n,i,a,o,r){function s(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r;return!r||t==r[0]||t===e.nullContext&&null===r[0]||(s=[t].concat(r)),n(e,t,e.helpers,e.partials,a.data||i,o&&[a.blockParams].concat(o),s)}return(s=c(n,s,e,r,i,o)).program=t,s.depth=r?r.length:0,s.blockParams=a||0,s}function u(){return""}function c(e,t,n,i,o,r){if(e.decorator){var s={};t=e.decorator(t,s,n,i&&i[0],o,r,i),a.extend(t,s)}return t}},function(e,t,n){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t.default}).call(this,n(3))},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'<div class="row">\n  <div class="col s12 m10">\n    <div class="card horizontal">\n      <div class="card-image">\n        <img src="'+l("function"==typeof(o=null!=(o=n.image_path||(null!=t?t.image_path:t))?o:s)?o.call(r,{name:"image_path",hash:{},data:a}):o)+'" class="recipe-image">\n      </div>\n      <div class="card-stacked">\n        <div class="card-content">\n          <p><strong>'+l("function"==typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:s)?o.call(r,{name:"title",hash:{},data:a}):o)+"</strong></p>\n          <p>"+l("function"==typeof(o=null!=(o=n.description||(null!=t?t.description:t))?o:s)?o.call(r,{name:"description",hash:{},data:a}):o)+'</p>\n        </div>\n        <div class="card-action">\n          <a href="#">View</a>\n          <a href="#">Edit</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var o;return null!=(o=n.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?o:""},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'<div class="row">\n  <div class="col s12 m5">\n    <a href="#modal-image-upload" class="modal-trigger">\n      <img class="responsive-img profile-img" width="250" src="'+l("function"==typeof(o=null!=(o=n.image_path||(null!=t?t.image_path:t))?o:s)?o.call(r,{name:"image_path",hash:{},data:a}):o)+'">\n    </a>\n  </div>\n  <div class="col s12 m7">\n    <div class="row">\n      <div class="col s4"><strong>First name</strong> </div>\n      <div class="col s8 personal-text">'+l("function"==typeof(o=null!=(o=n.firstname||(null!=t?t.firstname:t))?o:s)?o.call(r,{name:"firstname",hash:{},data:a}):o)+'</div>\n    </div>\n    <div class="row">\n      <div class="col s4"><strong>Last name</strong> </div>\n      <div class="col s8 personal-text">'+l("function"==typeof(o=null!=(o=n.lastname||(null!=t?t.lastname:t))?o:s)?o.call(r,{name:"lastname",hash:{},data:a}):o)+'</div>\n    </div>\n    <div class="row">\n      <div class="col s4"><strong>Email</strong> </div>\n      <div class="col s8 personal-text">'+l("function"==typeof(o=null!=(o=n.email||(null!=t?t.email:t))?o:s)?o.call(r,{name:"email",hash:{},data:a}):o)+'</div>\n    </div>\n    <div class="edit-details">\n      <a href="#modal-details-update" id="crop-profile-picture"\n        class="modal-trigger waves-effect waves-green btn-flat">Edit Details</a>\n    </div>\n  </div>\n</div>\n</div>'},useData:!0})},function(e,t,n){(function(i){var a,o;"undefined"!=typeof self&&self,void 0===(o="function"==typeof(a=function(){"function"!=typeof Promise&&function(t){function n(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(e,n(r,this),n(s,this))}function o(e){var t=this;return null===this._state?void this._deferreds.push(e):void p(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void e.reject(t)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void c(n(t,e),n(r,this),n(s,this))}this._state=!0,this._value=e,l.call(this)}catch(e){s.call(this,e)}}function s(e){this._state=!1,this._value=e,l.call(this)}function l(){for(var e=0,t=this._deferreds.length;t>e;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function c(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(e){if(i)return;i=!0,n(e)}}var d=setTimeout,p="function"==typeof i&&i||function(e){d(e,1)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=this;return new a(function(i,a){o.call(n,new u(e,t,i,a))})},a.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new a(function(t,n){function i(o,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(o,e)},n)}e[o]=r,0==--a&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var a=e.length,o=0;o<e.length;o++)i(o,e[o])})},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var i=0,a=e.length;a>i;i++)e[i].then(t,n)})},a._setImmediateFn=function(e){p=e},e.exports?e.exports=a:t.Promise||(t.Promise=a)}(this),"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,o=new Uint8Array(a),r=0;r<a;r++)o[r]=i.charCodeAt(r);e(new Blob([o],{type:t||"image/png"}))}});var t,n,a,o=["Webkit","Moz","ms"],r=document.createElement("div").style,s=[1,8,3,6],l=[2,7,4,5];function u(e){if(e in r)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=o.length;n--;)if((e=o[n]+t)in r)return e}function c(e,t){for(var n in e=e||{},t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},c(e[n],t[n])):e[n]=t[n];return e}function d(e){return c({},e)}function p(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function h(e,t,n){if("string"==typeof t){var i=t;(t={})[i]=n}for(var a in t)e.style[a]=t[a]}function f(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function m(e,t){for(var n in t)e.setAttribute(n,t[n])}function v(e){return parseInt(e,10)}function g(e,t){var n=e.naturalWidth,i=e.naturalHeight,a=t||x(e);if(a&&a>=5){var o=n;n=i,i=o}return{width:n,height:i}}n=u("transform"),t=u("transformOrigin"),a=u("userSelect");var w={translate3d:{suffix:", 0px"},translate:{suffix:""}},y=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)};y.parse=function(e){return e.style?y.parse(e.style[n]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?y.fromMatrix(e):y.fromString(e)},y.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new y(v(t[4]),v(t[5]),parseFloat(t[0]))},y.fromString=function(e){var t=e.split(") "),n=t[0].substring(W.globals.translate.length+1).split(","),i=t.length>1?t[1].substring(6):1,a=n.length>1?n[0]:0,o=n.length>1?n[1]:0;return new y(a,o,i)},y.prototype.toString=function(){var e=w[W.globals.translate].suffix||"";return W.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var b=function(e){if(!e||!e.style[t])return this.x=0,void(this.y=0);var n=e.style[t].split(" ");this.x=parseFloat(n[0]),this.y=parseFloat(n[1])};function x(e){return e.exifdata&&e.exifdata.Orientation?v(e.exifdata.Orientation):1}function _(e,t,n){var i=t.width,a=t.height,o=e.getContext("2d");switch(e.width=t.width,e.height=t.height,o.save(),n){case 2:o.translate(i,0),o.scale(-1,1);break;case 3:o.translate(i,a),o.rotate(180*Math.PI/180);break;case 4:o.translate(0,a),o.scale(1,-1);break;case 5:e.width=a,e.height=i,o.rotate(90*Math.PI/180),o.scale(1,-1);break;case 6:e.width=a,e.height=i,o.rotate(90*Math.PI/180),o.translate(0,-a);break;case 7:e.width=a,e.height=i,o.rotate(-90*Math.PI/180),o.translate(-i,a),o.scale(1,-1);break;case 8:e.width=a,e.height=i,o.translate(0,i),o.rotate(-90*Math.PI/180)}o.drawImage(t,0,0,i,a),o.restore()}function E(){var e,i,o,r,s,l,u=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||C.call(this),this.data={},this.elements={},e=this.elements.boundary=document.createElement("div"),o=this.elements.viewport=document.createElement("div"),i=this.elements.img=document.createElement("img"),r=this.elements.overlay=document.createElement("div"),this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=i,f(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),s=this.options.boundary.width,l=this.options.boundary.height,h(e,{width:s+(isNaN(s)?"":"px"),height:l+(isNaN(l)?"":"px")}),f(o,"cr-viewport"),u&&f(o,u),h(o,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),o.setAttribute("tabindex",0),f(this.elements.preview,"cr-image"),m(this.elements.preview,{alt:"preview","aria-grabbed":"false"}),f(r,"cr-overlay"),this.element.appendChild(e),e.appendChild(this.elements.preview),e.appendChild(o),e.appendChild(r),f(this.element,"croppie-container"),this.options.customClass&&f(this.element,this.options.customClass),function(){var e,t,i,o,r,s=this,l=!1;function u(e,t){var n=s.elements.preview.getBoundingClientRect(),i=r.y+t,a=r.x+e;s.options.enforceBoundary?(o.top>n.top+t&&o.bottom<n.bottom+t&&(r.y=i),o.left>n.left+e&&o.right<n.right+e&&(r.x=a)):(r.y=i,r.x=a)}function c(e){s.elements.preview.setAttribute("aria-grabbed",e),s.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function d(n){if((void 0===n.button||0===n.button)&&(n.preventDefault(),!l)){if(l=!0,e=n.pageX,t=n.pageY,n.touches){var i=n.touches[0];e=i.pageX,t=i.pageY}c(l),r=y.parse(s.elements.preview),window.addEventListener("mousemove",f),window.addEventListener("touchmove",f),window.addEventListener("mouseup",m),window.addEventListener("touchend",m),document.body.style[a]="none",o=s.elements.viewport.getBoundingClientRect()}}function f(a){a.preventDefault();var o=a.pageX,l=a.pageY;if(a.touches){var c=a.touches[0];o=c.pageX,l=c.pageY}var d=o-e,f=l-t,m={};if("touchmove"===a.type&&a.touches.length>1){var v=a.touches[0],g=a.touches[1],w=Math.sqrt((v.pageX-g.pageX)*(v.pageX-g.pageX)+(v.pageY-g.pageY)*(v.pageY-g.pageY));i||(i=w/s._currentZoom);var y=w/i;return M.call(s,y),void p(s.elements.zoomer)}u(d,f),m[n]=r.toString(),h(s.elements.preview,m),k.call(s),t=l,e=o}function m(){c(l=!1),window.removeEventListener("mousemove",f),window.removeEventListener("touchmove",f),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),document.body.style[a]="",T.call(s),L.call(s),i=0}s.elements.overlay.addEventListener("mousedown",d),s.elements.viewport.addEventListener("keydown",function(e){var t,l=37,c=38,d=39,p=40;if(!e.shiftKey||e.keyCode!==c&&e.keyCode!==p){if(s.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var f=function(e){switch(e){case l:return[1,0];case c:return[0,1];case d:return[-1,0];case p:return[0,-1]}}(e.keyCode);r=y.parse(s.elements.preview),document.body.style[a]="none",o=s.elements.viewport.getBoundingClientRect(),function(e){var t=e[0],o=e[1],l={};u(t,o),l[n]=r.toString(),h(s.elements.preview,l),k.call(s),document.body.style[a]="",T.call(s),L.call(s),i=0}(f)}}else t=e.keyCode===c?parseFloat(s.elements.zoomer.value)+parseFloat(s.elements.zoomer.step):parseFloat(s.elements.zoomer.value)-parseFloat(s.elements.zoomer.step),s.setZoom(t)}),s.elements.overlay.addEventListener("touchstart",d)}.call(this),this.options.enableZoom&&function(){var e=this,i=e.elements.zoomerWrap=document.createElement("div"),a=e.elements.zoomer=document.createElement("input");function o(){(function(e){var i=this,a=e?e.transform:y.parse(i.elements.preview),o=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),r=e?e.origin:new b(i.elements.preview);function s(){var e={};e[n]=a.toString(),e[t]=r.toString(),h(i.elements.preview,e)}if(i._currentZoom=e?e.value:i._currentZoom,a.scale=i._currentZoom,i.elements.zoomer.setAttribute("aria-valuenow",i._currentZoom),s(),i.options.enforceBoundary){var l=function(e){var t=this._currentZoom,n=e.width,i=e.height,a=this.elements.boundary.clientWidth/2,o=this.elements.boundary.clientHeight/2,r=this.elements.preview.getBoundingClientRect(),s=r.width,l=r.height,u=n/2,c=i/2,d=-1*(u/t-a),p=-1*(c/t-o),h=1/t*u,f=1/t*c;return{translate:{maxX:d,minX:d-(s*(1/t)-n*(1/t)),maxY:p,minY:p-(l*(1/t)-i*(1/t))},origin:{maxX:s*(1/t)-h,minX:h,maxY:l*(1/t)-f,minY:f}}}.call(i,o),u=l.translate,c=l.origin;a.x>=u.maxX&&(r.x=c.minX,a.x=u.maxX),a.x<=u.minX&&(r.x=c.maxX,a.x=u.minX),a.y>=u.maxY&&(r.y=c.minY,a.y=u.maxY),a.y<=u.minY&&(r.y=c.maxY,a.y=u.minY)}s(),j.call(i),L.call(i)}).call(e,{value:parseFloat(a.value),origin:new b(e.elements.preview),viewportRect:e.elements.viewport.getBoundingClientRect(),transform:y.parse(e.elements.preview)})}function r(t){var n,i;if("ctrl"===e.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;n=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,i=e._currentZoom+n*e._currentZoom,t.preventDefault(),M.call(e,i),o.call(e)}f(i,"cr-slider-wrap"),f(a,"cr-slider"),a.type="range",a.step="0.0001",a.value="1",a.style.display=e.options.showZoomer?"":"none",a.setAttribute("aria-label","zoom"),e.element.appendChild(i),i.appendChild(a),e._currentZoom=1,e.elements.zoomer.addEventListener("input",o),e.elements.zoomer.addEventListener("change",o),e.options.mouseWheelZoom&&(e.elements.boundary.addEventListener("mousewheel",r),e.elements.boundary.addEventListener("DOMMouseScroll",r))}.call(this),this.options.enableResize&&function(){var e,t,n,i,o,r,s,l=this,u=document.createElement("div"),c=!1,d=50;function p(r){if((void 0===r.button||0===r.button)&&(r.preventDefault(),!c)){var s=l.elements.overlay.getBoundingClientRect();if(c=!0,t=r.pageX,n=r.pageY,e=-1!==r.currentTarget.className.indexOf("vertical")?"v":"h",i=s.width,o=s.height,r.touches){var u=r.touches[0];t=u.pageX,n=u.pageY}window.addEventListener("mousemove",m),window.addEventListener("touchmove",m),window.addEventListener("mouseup",v),window.addEventListener("touchend",v),document.body.style[a]="none"}}function m(a){var r=a.pageX,s=a.pageY;if(a.preventDefault(),a.touches){var c=a.touches[0];r=c.pageX,s=c.pageY}var p=r-t,f=s-n,m=l.options.viewport.height+f,v=l.options.viewport.width+p;"v"===e&&m>=d&&m<=o?(h(u,{height:m+"px"}),l.options.boundary.height+=f,h(l.elements.boundary,{height:l.options.boundary.height+"px"}),l.options.viewport.height+=f,h(l.elements.viewport,{height:l.options.viewport.height+"px"})):"h"===e&&v>=d&&v<=i&&(h(u,{width:v+"px"}),l.options.boundary.width+=p,h(l.elements.boundary,{width:l.options.boundary.width+"px"}),l.options.viewport.width+=p,h(l.elements.viewport,{width:l.options.viewport.width+"px"})),k.call(l),F.call(l),T.call(l),L.call(l),n=s,t=r}function v(){c=!1,window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),document.body.style[a]=""}f(u,"cr-resizer"),h(u,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(f(r=document.createElement("div"),"cr-resizer-vertical"),u.appendChild(r)),this.options.resizeControls.width&&(f(s=document.createElement("div"),"cr-resizer-horisontal"),u.appendChild(s)),r&&(r.addEventListener("mousedown",p),r.addEventListener("touchstart",p)),s&&(s.addEventListener("mousedown",p),s.addEventListener("touchstart",p)),this.elements.boundary.appendChild(u)}.call(this)}function C(){return this.options.enableExif&&window.EXIF}function M(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=D(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),n)).toString()}}function T(e){var i=this._currentZoom,a=this.elements.preview.getBoundingClientRect(),o=this.elements.viewport.getBoundingClientRect(),r=y.parse(this.elements.preview.style[n]),s=new b(this.elements.preview),l=o.top-a.top+o.height/2,u=o.left-a.left+o.width/2,c={},d={};if(e){var p=s.x,f=s.y,m=r.x,v=r.y;c.y=p,c.x=f,r.y=m,r.x=v}else c.y=l/i,c.x=u/i,d.y=(c.y-s.y)*(1-i),d.x=(c.x-s.x)*(1-i),r.x-=d.x,r.y-=d.y;var g={};g[t]=c.x+"px "+c.y+"px",g[n]=r.toString(),h(this.elements.preview,g)}function k(){if(this.elements){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();h(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}}b.prototype.toString=function(){return this.x+"px "+this.y+"px"};var P,O,S,I,j=(P=k,O=500,function(){var e=this,t=arguments,n=S&&!I;clearTimeout(I),I=setTimeout(function(){I=null,S||P.apply(e,t)},O),n&&P.apply(e,t)});function L(){var e,t=this.get();$.call(this)&&(this.options.update.call(this,t),this.$&&"undefined"==typeof Prototype?this.$(this.element).trigger("update.croppie",t):(window.CustomEvent?e=new CustomEvent("update",{detail:t}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,t),this.element.dispatchEvent(e)))}function $(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function H(){var e,i={},a=this.elements.preview,o=new y(0,0,1),r=new b,s=$.call(this);s&&!this.data.bound&&(this.data.bound=!0,i[n]=o.toString(),i[t]=r.toString(),i.opacity=1,h(a,i),e=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=e.width,this._originalImageHeight=e.height,this.data.orientation=x(this.elements.img),this.options.enableZoom?F.call(this,!0):this._currentZoom=1,o.scale=this._currentZoom,i[n]=o.toString(),h(a,i),this.data.points.length?function(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var i=e[2]-e[0],a=this.elements.viewport.getBoundingClientRect(),o=this.elements.boundary.getBoundingClientRect(),r={left:a.left-o.left,top:a.top-o.top},s=a.width/i,l=e[1],u=e[0],c=-1*e[1]+r.top,d=-1*e[0]+r.left,p={};p[t]=u+"px "+l+"px",p[n]=new y(d,c,s).toString(),h(this.elements.preview,p),M.call(this,s),this._currentZoom=s}.call(this,this.data.points):function(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),i=this.elements.boundary.getBoundingClientRect(),a=t.left-i.left,o=t.top-i.top,r=a-(e.width-t.width)/2,s=o-(e.height-t.height)/2,l=new y(r,s,this._currentZoom);h(this.elements.preview,n,l.toString())}.call(this),T.call(this),k.call(this))}function F(e){var t,n,i,a,o=Math.max(this.options.minZoom,0)||0,r=this.options.maxZoom||1.5,s=this.elements.zoomer,l=parseFloat(s.value),u=this.elements.boundary.getBoundingClientRect(),c=g(this.elements.img,this.data.orientation),d=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(i=d.width/c.width,a=d.height/c.height,o=Math.max(i,a)),o>=r&&(r=o+1),s.min=D(o,4),s.max=D(r,4),!e&&(l<s.min||l>s.max)?M.call(this,l<s.min?s.min:s.max):e&&(n=Math.max(u.width/c.width,u.height/c.height),t=null!==this.data.boundZoom?this.data.boundZoom:n,M.call(this,t)),p(s)}function R(e){var t=e.points,n=v(t[0]),i=v(t[1]),a=v(t[2]),o=v(t[3]),r=a-n,s=o-i,l=e.circle,u=document.createElement("canvas"),c=u.getContext("2d"),d=e.outputWidth||r,p=e.outputHeight||s;return u.width=d,u.height=p,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,d,p)),sx=n,sy=i,sWidth=r,sHeight=s,dx=0,dy=0,dWidth=d,dHeight=p,n<0&&(sx=0,dx=Math.abs(n)/r*d),sWidth+sx>this._originalImageWidth&&(sWidth=this._originalImageWidth-sx,dWidth=sWidth/r*d),i<0&&(sy=0,dy=Math.abs(i)/s*p),sHeight+sy>this._originalImageHeight&&(sHeight=this._originalImageHeight-sy,dHeight=sHeight/s*p),c.drawImage(this.elements.preview,sx,sy,sWidth,sHeight,dx,dy,dWidth,dHeight),l&&(c.fillStyle="#fff",c.globalCompositeOperation="destination-in",c.beginPath(),c.arc(u.width/2,u.height/2,u.width/2,0,2*Math.PI,!0),c.closePath(),c.fill()),u}function N(e,t){var n,i,a,o,r=this,s=[],l=null,u=C.call(r);if("string"==typeof e)n=e,e={};else if(Array.isArray(e))s=e.slice();else{if(void 0===e&&r.data.url)return H.call(r),L.call(r),null;n=e.url,s=e.points||[],l=void 0===e.zoom?null:e.zoom}return r.data.bound=!1,r.data.url=n||r.data.url,r.data.boundZoom=l,(i=n,a=u,o=new Image,o.style.opacity="0",new Promise(function(e,t){function n(){o.style.opacity="1",setTimeout(function(){e(o)},1)}o.removeAttribute("crossOrigin"),i.match(/^https?:\/\/|^\/\//)&&o.setAttribute("crossOrigin","anonymous"),o.onload=function(){a?EXIF.getData(o,function(){n()}):n()},o.onerror=function(e){o.style.opacity=1,setTimeout(function(){t(e)},1)},o.src=i})).then(function(n){if(function(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(t){e.classList.add(t)}),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}.call(r,n),s.length)r.options.relative&&(s=[s[0]*n.naturalWidth/100,s[1]*n.naturalHeight/100,s[2]*n.naturalWidth/100,s[3]*n.naturalHeight/100]);else{var i,a,o=g(n),l=r.elements.viewport.getBoundingClientRect(),u=l.width/l.height,c=o.width/o.height;c>u?(a=o.height,i=a*u):(i=o.width,a=o.height/u);var d=(o.width-i)/2,p=(o.height-a)/2,h=d+i,f=p+a;r.data.points=[d,p,h,f]}r.data.points=s.map(function(e){return parseFloat(e)}),r.options.useCanvas&&function(e){var t=this.elements.canvas,n=this.elements.img;t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=n.width,t.height=n.height;var i=this.options.enableOrientation&&e||x(n);_(t,n,i)}.call(r,e.orientation),H.call(r),L.call(r),t&&t()})}function D(e,t){return parseFloat(e).toFixed(t||0)}function A(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),n=t.left-e.left,i=t.top-e.top,a=(t.width-this.elements.viewport.offsetWidth)/2,o=(t.height-this.elements.viewport.offsetHeight)/2,r=n+this.elements.viewport.offsetWidth+a,s=i+this.elements.viewport.offsetHeight+o,l=this._currentZoom;(l===1/0||isNaN(l))&&(l=1);var u=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return n=Math.max(u,n/l),i=Math.max(u,i/l),r=Math.max(u,r/l),s=Math.max(u,s/l),{points:[D(n),D(i),D(r),D(s)],zoom:l,orientation:this.data.orientation}}var B={type:"canvas",format:"png",quality:1},Z=["jpeg","webp","png"];if(window.jQuery){var z=window.jQuery;z.fn.croppie=function(e){var t=typeof e;if("string"===t){var n=Array.prototype.slice.call(arguments,1),i=z(this).data("croppie");return"get"===e?i.get():"result"===e?i.result.apply(i,n):"bind"===e?i.bind.apply(i,n):this.each(function(){var t=z(this).data("croppie");if(t){var i=t[e];if(!z.isFunction(i))throw"Croppie "+e+" method not found";i.apply(t,n),"destroy"===e&&z(this).removeData("croppie")}})}return this.each(function(){var t=new W(this,e);t.$=z,z(this).data("croppie",t)})}}function W(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=c(d(W.defaults),t),"img"===this.element.tagName.toLowerCase()){var n=this.element;f(n,"cr-original-image"),m(n,{"aria-hidden":"true",alt:""});var i=document.createElement("div");this.element.parentNode.appendChild(i),i.appendChild(n),this.element=i,this.options.url=this.options.url||n.src}if(E.call(this),this.options.url){var a={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,N.call(this,a)}}return W.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},W.globals={translate:"translate3d"},c(W.prototype,{bind:function(e,t){return N.call(this,e,t)},get:function(){var e=A.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return function(e){var t=this,n=A.call(t),i=c(d(B),d(e)),a="string"==typeof e?e:i.type||"base64",o=i.size||"viewport",r=i.format,s=i.quality,l=i.backgroundColor,u="boolean"==typeof i.circle?i.circle:"circle"===t.options.viewport.type,p=t.elements.viewport.getBoundingClientRect(),m=p.width/p.height;return"viewport"===o?(n.outputWidth=p.width,n.outputHeight=p.height):"object"==typeof o&&(o.width&&o.height?(n.outputWidth=o.width,n.outputHeight=o.height):o.width?(n.outputWidth=o.width,n.outputHeight=o.width/m):o.height&&(n.outputWidth=o.height*m,n.outputHeight=o.height)),Z.indexOf(r)>-1&&(n.format="image/"+r,n.quality=s),n.circle=u,n.url=t.data.url,n.backgroundColor=l,new Promise(function(e){switch(a.toLowerCase()){case"rawcanvas":e(R.call(t,n));break;case"canvas":case"base64":e(function(e){return R.call(this,e).toDataURL(e.format,e.quality)}.call(t,n));break;case"blob":(function(e){var t=this;return new Promise(function(n){R.call(t,e).toBlob(function(e){n(e)},e.format,e.quality)})}).call(t,n).then(e);break;default:e(function(e){var t=e.points,n=document.createElement("div"),i=document.createElement("img"),a=t[2]-t[0],o=t[3]-t[1];return f(n,"croppie-result"),n.appendChild(i),h(i,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),i.src=e.url,h(n,{width:a+"px",height:o+"px"}),n}.call(t,n))}})}.call(this,e)},refresh:function(){return function(){H.call(this)}.call(this)},setZoom:function(e){M.call(this,e),p(this.elements.zoomer)},rotate:function(e){(function(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t,n,i,a,o,r=this.elements.canvas;this.data.orientation=(t=this.data.orientation,n=e,i=s.indexOf(t)>-1?s:l,a=i.indexOf(t),o=n/90%i.length,i[(i.length+a+o%i.length)%i.length]),_(r,this.elements.img,this.data.orientation),T.call(this,!0),F.call(this)}).call(this,e)},destroy:function(){return function(){var e,t;this.element.removeChild(this.elements.boundary),e=this.element,t="croppie-container",e.classList?e.classList.remove(t):e.className=e.className.replace(t,""),this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap),delete this.elements}.call(this)}}),W})?a.call(t,n,t,e):a)||(e.exports=o)}).call(this,n(25).setImmediate)},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(26),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,a,o,r,s,l=1,u={},c=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(r="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&f(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(r+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,i(l),l++},p.clearImmediate=h}function h(e){delete u[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(27))},function(e,t){var n,i,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var l,u=[],c=!1,d=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var e=s(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}]);