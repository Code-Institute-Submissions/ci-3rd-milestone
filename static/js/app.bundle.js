var TE=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!r.test(e))return e;return e.replace(a,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},a=/[&<>"'`=]/g,r=/[&<>"'`=]/;function o(e){return i[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString;t.toString=l;var c=function(e){return"function"==typeof e};c(/x/)&&(t.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=c;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=u},function(e,t,n){"use strict";t.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];function a(e,t){var n=t&&t.loc,r=void 0,o=void 0;n&&(e+=" - "+(r=n.start.line)+":"+(o=n.start.column));for(var s=Error.prototype.constructor.call(this,e),l=0;l<i.length;l++)this[i[l]]=s[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,a);try{n&&(this.lineNumber=r,Object.defineProperty?Object.defineProperty(this,"column",{value:o,enumerable:!0}):this.column=o)}catch(e){}}a.prototype=new Error,t.default=a,e.exports=t.default},function(e,t,n){e.exports=n(7).default},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=c;var a=n(0),r=i(n(1)),o=n(8),s=n(16),l=i(n(18));t.VERSION="4.1.1";t.COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function c(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}c.prototype={constructor:c,logger:l.default,log:l.default.log,registerHelper:function(e,t){if("[object Object]"===a.toString.call(e)){if(t)throw new r.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===a.toString.call(e))a.extend(this.partials,e);else{if(void 0===t)throw new r.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===a.toString.call(e)){if(t)throw new r.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var u=l.default.log;t.log=u,t.createFrame=a.createFrame,t.logger=l.default},function(e,t,n){const i=n(6),a=n(22),r=n(23),o=n(24);n(25);let s;$(".croppie-file-input").on("change",e=>{if($(".croppie-file-input")[0].files[0]){console.log("Image found in input field"),$(".upload-img").attr("src","/static/images/placeholder.png");const e=$(".croppie-file-input")[0].files[0],t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){s||(s=$("#croppie").croppie({viewport:{width:180,height:240},boundary:{width:300,height:300}})),s.croppie("bind",{url:this.result})}}else console.log("No file found in input field")}),$(".croppie-file-input-modal").on("change",e=>{if($(".croppie-file-input-modal")[0].files[0]){console.log("Image found in input field");const e=$(".croppie-file-input-modal")[0].files[0],t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){s||(s=$("#croppie").croppie({viewport:{width:250,height:250},boundary:{width:300,height:300}})),s.croppie("bind",{url:this.result})}}else console.log("No file found in input field")}),$("#crop-profile-picture").on("click",function(){s?(console.log("Cropping image"),s.croppie("result",{type:"base64",format:"jpg",size:{width:300,height:300}}).then(e=>{$(".profile-img").attr("src",e),fetch("/user/image",{method:"POST",body:JSON.stringify({image_base64:e.split(",")[1],old_image_path:TE.userData.image_path}),headers:{"Content-Type":"application/json"}}).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),"ok"==e.status?(TE.userData.image_path=e.new_image_path,M.toast({html:"Successfully updated!",classes:"light-green darken-1"})):"failed"==e.status&&M.toast({html:"Something went wrong",classes:"red darken-1"})})})):console.log("No croppie object found")});const l=e=>{let t;if(e||(e=1,t=!0),!t){$(".recipe-pagination").find("li").removeClass("active deep-orange darken-1");const t=$(".recipe-pagination").find("li")[e];$(t).addClass("active deep-orange darken-1"),$(".recipe-card-container").append('<div class="card-container-loader">\n                    <div class="loader"></div>\n                </div>')}TE.activeUserRecipePage=e,fetch(window.location.origin+"/recipe/user?page="+e,{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{const n=i(e);t?$("#recipe-loader").remove():($(".recipe-pagination").remove(),$(".recipe-card-container").remove()),$("#recipe-container").append(n)})};e.exports={signupUser:e=>{const t=e.parentNode.parentNode.parentNode,n={firstname:t.querySelector("[name=firstname]").value,lastname:t.querySelector("[name=lastname]").value,email:t.querySelector("[name=email]").value,password:t.querySelector("[name=password]").value,repeatpassword:t.querySelector("[name=repeat_password]").value};if(""!==n.email)if(""!==n.password){if(n.password!==n.repeatpassword){M.toast({html:"Passwords are not equal",classes:"red darken-1"}),a=$("[name=password]")[0];var i=$("[name=repeat_password]")[0];return $(a).addClass("invalid"),void $(i).addClass("invalid")}$(e).toggleClass("disabled"),$(".signup-loading").css("visibility","visible"),fetch("/signup",{method:"POST",body:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>e.json()).then(t=>{if("ok"==t.status)M.toast({html:"Success!",classes:"light-green darken-1"}),$(".signup-loading").css("visibility","hidden"),setTimeout(()=>window.location.replace("/dashboard"),1e3);else if("failed"==t.status){M.toast({html:"Email address already in use",classes:"red darken-1"});var n=$("[name=email]")[0];$(n).addClass("invalid"),$(e).toggleClass("disabled"),$(".login-loading").css("visibility","hidden")}}).catch(e=>{console.log(e)})}else{M.toast({html:"Please provide a password",classes:"red darken-1"});var a=$("[name=password]")[0];$(a).addClass("invalid")}else{M.toast({html:"Please provide an email",classes:"red darken-1"});var r=$("[name=email]")[0];$(r).addClass("invalid")}},logInUser:e=>{const t=e.parentNode.parentNode.parentNode,n={email:t.querySelector("[name=email]").value,password:t.querySelector("[name=password]").value};if(""!==n.email)if(""!==n.password)$(e).toggleClass("disabled"),$(".login-loading").css("visibility","visible"),fetch("/login",{method:"POST",redirect:"follow",body:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>e.redirected?window.location.replace(e.url):e.json()).then(t=>{"failed"==t.status&&(M.toast({html:t.message,classes:"red darken-1"}),$(".login-loading").css("visibility","hidden"),$(e).toggleClass("disabled"))}).catch(e=>{console.log(e)});else{M.toast({html:"Please provide a password",classes:"red darken-1"});var i=$("[name=password]")[0];$(i).addClass("invalid")}else{M.toast({html:"Please provide an email",classes:"red darken-1"});var a=$("[name=email]")[0];$(a).addClass("invalid")}},addRecipe:e=>{const t=e.parentNode.parentNode.parentNode,n={title:t.querySelector("[name=title]").value,description:t.querySelector("[name=description]").value,recipe:t.querySelector("[name=recipe]").value,image_name:"",image_base64:""};let i="";$(".recipe-line").each((e,t)=>{let n=$(t).find("input")[0].value;""!=n&&(i+="<in>"+n+"</in>")}),n.ingredients=i,console.log(n);const a=$("select"),r=M.FormSelect.getInstance(a).getSelectedValues();return n.labels=r,$(".croppie-file-input")[0].files[0]?(console.log($(".croppie-file-input")[0].files[0]),n.image_name=$(".croppie-file-input")[0].files[0].name,""==n.title||""==n.description||""==n.recipe||""==n.ingredients?M.toast({html:"Please fill in all input fields",classes:"red darken-1"}):0==r.length?M.toast({html:"Please select at least one label!",classes:"red darken-1"}):s?void s.croppie("result",{type:"base64",format:"jpg",size:{width:300,height:400}}).then(e=>{n.image_base64=e.split(",")[1],$("body").append('<div class="loader-container">\n                                    <div class="loader"></div>\n                                </div>'),fetch(window.location.origin+"/recipe",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(e=>{if(console.log(e),e.redirected)return window.location.replace(e.url)})}):M.toast({html:"Please upload a photo",classes:"red darken-1"})):M.toast({html:"Please upload a photo",classes:"red darken-1"})},updateRecipe:e=>{const t=e.parentNode.parentNode.parentNode,n={title:t.querySelector("[name=title]").value,description:t.querySelector("[name=description]").value,recipe:t.querySelector("[name=recipe]").value,image_name:"",image_base64:""};let i="";$(".recipe-line").each((e,t)=>{let n=$(t).find("input")[0].value;""!=n&&(i+="<in>"+n+"</in>")}),n.ingredients=i,console.log(n);const a=$("select"),r=M.FormSelect.getInstance(a).getSelectedValues();if(n.labels=r,$(".croppie-file-input")[0].files[0]&&(n.image_name=$(".croppie-file-input")[0].files[0].name),""==n.title||""==n.description||""==n.recipe)return M.toast({html:"Please fill in all input fields",classes:"red darken-1"});if(0==r.length)return M.toast({html:"Please select at least one label!",classes:"red darken-1"});function o(){$("body").append('<div class="loader-container">\n            <div class="loader"></div>\n        </div>');let e=window.location.pathname.lastIndexOf("/"),t=window.location.pathname.substring(e+1);fetch(window.location.origin+"/recipe/"+t,{method:"PATCH",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e),"success"===e.status?window.location=document.referrer:"failed"==e.status&&($(".loader-container").remove(),M.toast({html:"Oops... Something went wrong",classes:"red darken-1"}))})}s?s.croppie("result",{type:"base64",format:"jpg",size:{width:300,height:400}}).then(e=>{n.image_base64=e.split(",")[1],o()}):o()},getUserRecipes:l,getUserData:()=>{fetch(window.location.origin+"/user",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{TE.userData=e,$("#modal-details-update").find("[name=firstname]").attr("value",e.firstname),$("#modal-details-update").find("[name=lastname]").attr("value",e.lastname),$("#modal-details-update").find("[name=email]").attr("value",e.email),M.updateTextFields();const t=a(e);$("#user-loader").remove(),$("#user-container").append(t)})},getUserFavorites:()=>{fetch(window.location.origin+"/user/favorites",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{e.favorites.map(e=>(e.description.length>100&&(e.description=e.description.slice(0,100)+"..."),e));const t=o(e);console.log(t),console.log(e.favorites),$("#favorites-loader").remove(),$("#favorites-container").append(t)})},updateUserData:()=>{const e={firstname:$("#modal-details-update").find("[name=firstname]")[0].value,lastname:$("#modal-details-update").find("[name=lastname]")[0].value,email:$("#modal-details-update").find("[name=email]")[0].value};TE.userData.firstname=e.firstname,TE.userData.lastname=e.lastname,TE.userData.email=e.email;const t=a(TE.userData);$("#user-container").children().last().remove(),$("#user-container").append(t),fetch(window.location.origin+"/user",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e)})},deleteRecipe:e=>{confirm("Are you sure you want to delete this recipe?")&&fetch(window.location.origin+"/recipe/"+e,{method:"DELETE"}).then(e=>e.json()).then(e=>{console.log(e),"ok"==e.status&&("/dashboard"==window.location.pathname?l(TE.activeUserRecipePage):window.location=document.referrer)})},getRecipes:e=>{let t;if(e||(e=1,t=!0),!t){$(".recipe-pagination").find("li").removeClass("active deep-orange darken-1");const t=$(".recipe-pagination").find("li")[e];$(t).addClass("active deep-orange darken-1"),$(".recipes-page-wrapper").append('<div class="card-container-loader">\n                    <div class="loader"></div>\n                </div>')}$("select").formSelect();const n=$("#rating-selector"),i=M.FormSelect.getInstance(n).getSelectedValues(),a=$("#label-selector"),o=M.FormSelect.getInstance(a).getSelectedValues().join("+"),s="/drinks/recipes?page="+e+"&rating="+i[0]+"&labels="+o;fetch(window.location.origin+s,{method:"GET"}).then(e=>e.json()).then(e=>{console.log(e);let n=e.recipes,i=!0;Math.floor(n.length/2)==n.length/2&&(i=!1),e.uneven=i,e.recipes.map(e=>(e.description.length>100&&(e.description=e.description.slice(0,100)+"..."),e.stars={zero:!1,one:!1,two:!1,three:!1,four:!1,five:!1},e.avg_rating>=4.8?e.stars.five=!0:e.avg_rating>=3.8?e.stars.four=!0:e.avg_rating>=2.8?e.stars.three=!0:e.avg_rating>=1.8?e.stars.two=!0:e.avg_rating>=.8?e.stars.one=!0:e.stars.zero=!0,e)),console.log(e);const a=r(e);t||($(".recipe-pagination").remove(),$(".recipes-page-wrapper").remove()),$(".recipes-page-container").append(a)})},addRecipeLine:e=>{const t=e.parentNode.parentNode;$(t).after('\n    <div class="row recipe-line" style="margin-bottom: 0">\n        <div class="input-field col recipe-line-description">\n        <input id="last_name" type="text" class="validate" placeholder="Extra ingredient">\n        </div>\n        <div class=""><i class="recipe-line-icon small material-icons deep-orange-text text-darken-1 right-align"\n            onclick="TE.addRecipeLine(this)">add_circle_outline</i>\n        </div>\n    </div>'),e.innerText="remove_circle_outline",$(e).removeClass("deep-orange-text text-darken-1"),$(e).addClass("grey-text"),$(e).attr("onclick","TE.removeRecipeLine(this)")},removeRecipeLine:e=>{const t=e.parentNode.parentNode;$(t).remove()},postComment:e=>{const t=e.parentNode,n=$(t).find("textarea")[0].value;if(""!==n)return n.length>500?M.toast({html:"Message is too long, maximum character of 500 allowed!",classes:"red darken-1"}):void $(t).submit()},deleteComment:e=>{fetch(window.location.origin+"/comment/"+e,{method:"DELETE"}).then(e=>e.json()).then(e=>{if(console.log(e),"success"===e.status)document.location.reload(!0);else if("failed"===e.status)return M.toast({html:"Oops... Something went wrong",classes:"red darken-1"})})},toggleFavorite:(e,t)=>{let n=!1;$(".favorite-active")[0]&&(n=!0),n?fetch(window.location.origin+"/favorite/"+e,{method:"DELETE"}).then(e=>e.json()).then(e=>{if("success"===e.status)$(t).toggleClass("favorite-active");else if("failed"===e.status)return M.toast({html:"Oops... Something went wrong",classes:"red darken-1"})}):fetch(window.location.origin+"/favorite/"+e,{method:"POST"}).then(e=>e.json()).then(e=>{if(console.log(e),"success"===e.status)$(t).toggleClass("favorite-active");else if("failed"===e.status)return M.toast({html:"Oops... Something went wrong",classes:"red darken-1"})})},updateRating:e=>{const t=window.location.pathname.lastIndexOf("/"),n=window.location.pathname.substring(t+1),i=$(e)[0].value;if(!i)return console.log("Rating is undefined, something went wrong"),M.toast({html:"Rating could not be updated...",classes:"red darken-1"});fetch(window.location.origin+"/rating/",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:i,recipe_id:n})}).then(e=>e.json()).then(e=>{if("success"===e.status)M.toast({html:e.message,classes:"light-green darken-1"});else if("failed"===e.status)return M.toast({html:e.message,classes:"red darken-1"})})}}},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'      <li class="disabled"><a href="#/"><i class="material-icons">chevron_left</i></a></li>\n'},3:function(e,t,n,i,a){var r;return'      <li class="waves-effect"><a href="#/" onclick="TE.getUserRecipes('+e.escapeExpression("function"==typeof(r=null!=(r=n.previous||(null!=t?t.previous:t))?r:n.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"previous",hash:{},data:a}):r)+')"><i\n            class="material-icons">chevron_left</i></a></li>\n'},5:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.active:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.program(8,a,0),data:a}))?r:""},6:function(e,t,n,i,a){var r;return'      <li class="active deep-orange darken-1"><a href="#">'+e.escapeExpression("function"==typeof(r=null!=(r=n.index||(null!=t?t.index:t))?r:n.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:a}):r)+"</a></li>\n"},8:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'      <li class="waves-effect"><a href="#/" onclick="TE.getUserRecipes('+l("function"==typeof(r=null!=(r=n.index||(null!=t?t.index:t))?r:s)?r.call(o,{name:"index",hash:{},data:a}):r)+')">'+l("function"==typeof(r=null!=(r=n.index||(null!=t?t.index:t))?r:s)?r.call(o,{name:"index",hash:{},data:a}):r)+"</a></li>\n"},10:function(e,t,n,i,a){return'      <li class="disabled"><a href="#/"><i class="material-icons">chevron_right</i></a></li>\n'},12:function(e,t,n,i,a){var r;return'      <li class="waves-effect"><a href="#/" onclick="TE.getUserRecipes('+e.escapeExpression("function"==typeof(r=null!=(r=n.next||(null!=t?t.next:t))?r:n.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"next",hash:{},data:a}):r)+')"><i\n            class="material-icons">chevron_right</i></a></li>\n'},14:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=n.helperMissing,l="function",c=e.escapeExpression;return'  <div class="row">\n    <div class="col s12">\n      <div class="card horizontal">\n        <div class="card-image">\n          <img src="'+c(typeof(r=null!=(r=n.image_path||(null!=t?t.image_path:t))?r:s)===l?r.call(o,{name:"image_path",hash:{},data:a}):r)+'" class="recipe-image">\n        </div>\n        <div class="card-stacked">\n          <div class="card-content">\n            <p class="title"><strong>'+c(typeof(r=null!=(r=n.title||(null!=t?t.title:t))?r:s)===l?r.call(o,{name:"title",hash:{},data:a}):r)+'</strong></p>\n            <p class="date"><strong>'+c(typeof(r=null!=(r=n.date||(null!=t?t.date:t))?r:s)===l?r.call(o,{name:"date",hash:{},data:a}):r)+'</strong></p>\n            <p class="description">'+c(typeof(r=null!=(r=n.description||(null!=t?t.description:t))?r:s)===l?r.call(o,{name:"description",hash:{},data:a}):r)+'</p>\n          </div>\n          <div class="card-action">\n            <a href="/recipe/'+c(typeof(r=null!=(r=n.id||(null!=t?t.id:t))?r:s)===l?r.call(o,{name:"id",hash:{},data:a}):r)+'">View</a>\n            <a href="/recipe/'+c(typeof(r=null!=(r=n.id||(null!=t?t.id:t))?r:s)===l?r.call(o,{name:"id",hash:{},data:a}):r)+'?edit=true">Edit</a>\n          </div>\n          <div class="delete-action">\n            <a href="javascript:void(0);" onclick="TE.deleteRecipe('+c(typeof(r=null!=(r=n.id||(null!=t?t.id:t))?r:s)===l?r.call(o,{name:"id",hash:{},data:a}):r)+')">\n              <i class="material-icons grey-text">delete</i>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{};return'<div class="row recipe-pagination">\n  <div class="col s12">\n    <ul class="pagination center-align">\n'+(null!=(r=n.unless.call(o,null!=t?t.previous:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?r:"")+(null!=(r=n.each.call(o,null!=t?t.pages:t,{name:"each",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?r:"")+(null!=(r=n.unless.call(o,null!=t?t.next:t,{name:"unless",hash:{},fn:e.program(10,a,0),inverse:e.program(12,a,0),data:a}))?r:"")+'    </ul>\n  </div>\n</div>\n<div class="recipe-card-container">\n'+(null!=(r=n.each.call(o,null!=t?t.recipes:t,{name:"each",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?r:"")+"</div>"},useData:!0})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var r=a(n(4)),o=i(n(19)),s=i(n(1)),l=a(n(0)),c=a(n(20)),u=i(n(21));function d(){var e=new r.HandlebarsEnvironment;return l.extend(e,r),e.SafeString=o.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e}var p=d();p.create=d,u.default(p),p.default=p,t.default=p,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){a.default(e),r.default(e),o.default(e),s.default(e),l.default(e),c.default(e),u.default(e)};var a=i(n(9)),r=i(n(10)),o=i(n(11)),s=i(n(12)),l=i(n(13)),c=i(n(14)),u=i(n(15))},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse,r=n.fn;if(!0===t)return r(this);if(!1===t||null==t)return a(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return r(t,n)})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,a=n(0),r=n(1),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new o.default("Must pass iterator to #each");var n=t.fn,i=t.inverse,r=0,s="",l=void 0,c=void 0;function u(t,i,r){l&&(l.key=t,l.index=i,l.first=0===i,l.last=!!r,c&&(l.contextPath=c+t)),s+=n(e[t],{data:l,blockParams:a.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(l=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var d=e.length;r<d;r++)r in e&&u(r,r,r===e.length-1);else{var p=void 0;for(var h in e)e.hasOwnProperty(h)&&(void 0!==p&&u(p,r-1),p=h,r++);void 0!==p&&u(p,r-1,!0)}return 0===r&&(s=i(this)),s})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i,a=n(1),r=(i=a)&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("if",function(e,t){return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),t[0]=a,e.log.apply(e,t)})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerHelper("with",function(e,t){i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var a=t.data;return t.data&&t.ids&&((a=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:a,blockParams:i.blockParams([e],[a&&a.contextPath])})})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){r.default(e)};var i,a=n(17),r=(i=a)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0);t.default=function(e){e.registerDecorator("inline",function(e,t,n,a){var r=e;return t.partials||(t.partials={},r=function(a,r){var o=n.partials;n.partials=i.extend({},o,t.partials);var s=e(a,r);return n.partials=o,s}),t.partials[a.args[0]]=a.fn,r})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(0),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];console[t].apply(console,i)}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t!==n){if(t<n){var i=s.REVISION_CHANGES[n],a=s.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new o.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(n,i,r){r.hash&&(i=a.extend({},i,r.hash),r.ids&&(r.ids[0]=!0));n=t.VM.resolvePartial.call(this,n,i,r);var s=t.VM.invokePartial.call(this,n,i,r);null==s&&t.compile&&(r.partials[r.name]=t.compile(n,e.compilerOptions,t),s=r.partials[r.name](i,r));if(null!=s){if(r.indent){for(var l=s.split("\n"),c=0,u=l.length;c<u&&(l[c]||c+1!==u);c++)l[c]=r.indent+l[c];s=l.join("\n")}return s}throw new o.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,a){var r=this.programs[e],o=this.fn(e);return t||a||i||n?r=l(this,e,o,t,n,i,a):r||(r=this.programs[e]=l(this,e,o)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=a.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function i(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=a.data;i._setup(a),!a.partial&&e.useData&&(r=function(e,t){t&&"root"in t||((t=t?s.createFrame(t):{}).root=e);return t}(t,r));var o=void 0,l=e.useBlockParams?[]:void 0;function c(t){return""+e.main(n,t,n.helpers,n.partials,r,l,o)}return e.useDepths&&(o=a.depths?t!=a.depths[0]?[t].concat(a.depths):a.depths:[t]),(c=u(e.main,c,n,a.depths||[],r,l))(t,a)}return i.isTop=!0,i._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials,n.decorators=i.decorators):(n.helpers=n.merge(i.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=n.merge(i.decorators,t.decorators)))},i._child=function(t,i,a,r){if(e.useBlockParams&&!a)throw new o.default("must pass block params");if(e.useDepths&&!r)throw new o.default("must pass parent depths");return l(n,t,e[t],i,0,a,r)},i},t.wrapProgram=l,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;n.fn&&n.fn!==c&&function(){n.data=s.createFrame(n.data);var e=n.fn;r=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=a.extend({},n.partials,e.partials))}();void 0===e&&r&&(e=r);if(void 0===e)throw new o.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=c;var i,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=n(1),o=(i=r)&&i.__esModule?i:{default:i},s=n(4);function l(e,t,n,i,a,r,o){function s(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,a.data||i,r&&[a.blockParams].concat(r),s)}return(s=u(n,s,e,o,i,r)).program=t,s.depth=o?o.length:0,s.blockParams=a||0,s}function c(){return""}function u(e,t,n,i,r,o){if(e.decorator){var s={};t=e.decorator(t,s,n,i&&i[0],r,o,i),a.extend(t,s)}return t}},function(e,t,n){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t.default}).call(this,n(3))},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'<div class="row">\n  <div class="col s12 m5">\n    <a href="#modal-image-upload" class="modal-trigger">\n      <img class="responsive-img profile-img" width="250" src="'+l("function"==typeof(r=null!=(r=n.image_path||(null!=t?t.image_path:t))?r:s)?r.call(o,{name:"image_path",hash:{},data:a}):r)+'">\n    </a>\n  </div>\n  <div class="col s12 m7">\n    <div class="row">\n      <div class="col s4"><strong>First name</strong> </div>\n      <div class="col s8 personal-text">'+l("function"==typeof(r=null!=(r=n.firstname||(null!=t?t.firstname:t))?r:s)?r.call(o,{name:"firstname",hash:{},data:a}):r)+'</div>\n    </div>\n    <div class="row">\n      <div class="col s4"><strong>Last name</strong> </div>\n      <div class="col s8 personal-text">'+l("function"==typeof(r=null!=(r=n.lastname||(null!=t?t.lastname:t))?r:s)?r.call(o,{name:"lastname",hash:{},data:a}):r)+'</div>\n    </div>\n    <div class="row">\n      <div class="col s4"><strong>Email</strong> </div>\n      <div class="col s8 personal-text">'+l("function"==typeof(r=null!=(r=n.email||(null!=t?t.email:t))?r:s)?r.call(o,{name:"email",hash:{},data:a}):r)+'</div>\n    </div>\n    <div class="edit-details">\n      <a href="#modal-details-update" id="crop-profile-picture"\n        class="modal-trigger waves-effect waves-green btn-flat">Edit Details</a>\n    </div>\n  </div>\n</div>\n</div>'},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o,s=null!=t?t:e.nullContext||{},l=n.helperMissing,c="function",u=e.escapeExpression;return'  <a href="/recipe/'+u(typeof(o=null!=(o=n.id||(null!=t?t.id:t))?o:l)===c?o.call(s,{name:"id",hash:{},data:a}):o)+'" class="items-page-card-link">\n    <div class="card horizontal items-page-card">\n      <div class="card-image">\n        <img src="/'+u(typeof(o=null!=(o=n.image_path||(null!=t?t.image_path:t))?o:l)===c?o.call(s,{name:"image_path",hash:{},data:a}):o)+'" class="recipe-image">\n      </div>\n      <div class="card-stacked">\n        <div class="card-content">\n          <p class="title"><strong>'+u(typeof(o=null!=(o=n.title||(null!=t?t.title:t))?o:l)===c?o.call(s,{name:"title",hash:{},data:a}):o)+'</strong></p>\n          <p class="date"><strong>'+u(typeof(o=null!=(o=n.date||(null!=t?t.date:t))?o:l)===c?o.call(s,{name:"date",hash:{},data:a}):o)+'</strong></p>\n          <p class="description">'+u(typeof(o=null!=(o=n.description||(null!=t?t.description:t))?o:l)===c?o.call(s,{name:"description",hash:{},data:a}):o)+'</p>\n        </div>\n        <div class="card-action card-info">\n          <i class="material-icons">visibility</i>\n          <div>'+u(typeof(o=null!=(o=n.views||(null!=t?t.views:t))?o:l)===c?o.call(s,{name:"views",hash:{},data:a}):o)+"</div>\n          <div>\n"+(null!=(r=n.if.call(s,null!=(r=null!=t?t.stars:t)?r.zero:r,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?r:"")+"            <div>("+u(typeof(o=null!=(o=n.nr_ratings||(null!=t?t.nr_ratings:t))?o:l)===c?o.call(s,{name:"nr_ratings",hash:{},data:a}):o)+")</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </a>\n"},2:function(e,t,n,i,a){return'            <div class="rating">&#9734;&#9734;&#9734;&#9734;&#9734;</div>\n'},4:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.stars:t)?r.one:r,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?r:""},5:function(e,t,n,i,a){return'            <div class="rating">&#9733;&#9734;&#9734;&#9734;&#9734;</div>\n'},7:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.stars:t)?r.two:r,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.program(10,a,0),data:a}))?r:""},8:function(e,t,n,i,a){return'            <div class="rating">&#9733;&#9733;&#9734;&#9734;&#9734;</div>\n'},10:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.stars:t)?r.three:r,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.program(13,a,0),data:a}))?r:""},11:function(e,t,n,i,a){return'            <div class="rating">&#9733;&#9733;&#9733;&#9734;&#9734;</div>\n'},13:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.stars:t)?r.four:r,{name:"if",hash:{},fn:e.program(14,a,0),inverse:e.program(16,a,0),data:a}))?r:""},14:function(e,t,n,i,a){return'            <div class="rating">&#9733;&#9733;&#9733;&#9733;&#9734;</div>\n'},16:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.stars:t)?r.five:r,{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a}))?r:""},17:function(e,t,n,i,a){return'            <div class="rating">&#9733;&#9733;&#9733;&#9733;&#9733;</div>\n            '},19:function(e,t,n,i,a){return'  <div class="card horizontal items-page-card-link disabled" style="border: 0px"></div>\n'},21:function(e,t,n,i,a){return'      <li class="disabled"><a href="#/"><i class="material-icons">chevron_left</i></a></li>\n'},23:function(e,t,n,i,a){var r;return'      <li class="waves-effect"><a href="#/" onclick="TE.getRecipes('+e.escapeExpression("function"==typeof(r=null!=(r=n.previous||(null!=t?t.previous:t))?r:n.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"previous",hash:{},data:a}):r)+')"><i\n            class="material-icons">chevron_left</i></a></li>\n'},25:function(e,t,n,i,a){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.active:t,{name:"if",hash:{},fn:e.program(26,a,0),inverse:e.program(28,a,0),data:a}))?r:""},26:function(e,t,n,i,a){var r;return'      <li class="active deep-orange darken-1"><a href="#">'+e.escapeExpression("function"==typeof(r=null!=(r=n.index||(null!=t?t.index:t))?r:n.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:a}):r)+"</a></li>\n"},28:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'      <li class="waves-effect"><a href="#/" onclick="TE.getRecipes('+l("function"==typeof(r=null!=(r=n.index||(null!=t?t.index:t))?r:s)?r.call(o,{name:"index",hash:{},data:a}):r)+')">'+l("function"==typeof(r=null!=(r=n.index||(null!=t?t.index:t))?r:s)?r.call(o,{name:"index",hash:{},data:a}):r)+"</a></li>\n"},30:function(e,t,n,i,a){return'      <li class="disabled"><a href="#/"><i class="material-icons">chevron_right</i></a></li>\n'},32:function(e,t,n,i,a){var r;return'      <li class="waves-effect"><a href="#/" onclick="TE.getRecipes('+e.escapeExpression("function"==typeof(r=null!=(r=n.next||(null!=t?t.next:t))?r:n.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"next",hash:{},data:a}):r)+')"><i\n            class="material-icons">chevron_right</i></a></li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{};return'<div class="recipes-page-wrapper">\n'+(null!=(r=n.each.call(o,null!=t?t.recipes:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?r:"")+(null!=(r=n.if.call(o,null!=t?t.uneven:t,{name:"if",hash:{},fn:e.program(19,a,0),inverse:e.noop,data:a}))?r:"")+'</div>\n<div class="row recipe-pagination">\n  <div class="col s12">\n    <ul class="pagination center-align">\n'+(null!=(r=n.unless.call(o,null!=t?t.previous:t,{name:"unless",hash:{},fn:e.program(21,a,0),inverse:e.program(23,a,0),data:a}))?r:"")+(null!=(r=n.each.call(o,null!=t?t.pages:t,{name:"each",hash:{},fn:e.program(25,a,0),inverse:e.noop,data:a}))?r:"")+(null!=(r=n.unless.call(o,null!=t?t.next:t,{name:"unless",hash:{},fn:e.program(30,a,0),inverse:e.program(32,a,0),data:a}))?r:"")+"    </ul>\n  </div>\n</div>"},useData:!0})},function(e,t,n){var i=n(2);e.exports=(i.default||i).template({1:function(e,t,n,i,a){var r,o=null!=t?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'<a href="/recipe/'+l("function"==typeof(r=null!=(r=n.recipe_id||(null!=t?t.recipe_id:t))?r:s)?r.call(o,{name:"recipe_id",hash:{},data:a}):r)+'" style="color:black">\r\n  <div class="favorite-item">\r\n    <div>'+l("function"==typeof(r=null!=(r=n.title||(null!=t?t.title:t))?r:s)?r.call(o,{name:"title",hash:{},data:a}):r)+"</div>\r\n    <div>"+l("function"==typeof(r=null!=(r=n.description||(null!=t?t.description:t))?r:s)?r.call(o,{name:"description",hash:{},data:a}):r)+"</div>\r\n  </div>\r\n</a>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var r;return null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.favorites:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?r:""},useData:!0})},function(e,t,n){(function(i){var a,r;"undefined"!=typeof self&&self,void 0===(r="function"==typeof(a=function(){"function"!=typeof Promise&&function(t){function n(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,n(o,this),n(s,this))}function r(e){var t=this;return null===this._state?void this._deferreds.push(e):void p(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void e.reject(t)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void u(n(t,e),n(o,this),n(s,this))}this._state=!0,this._value=e,l.call(this)}catch(e){s.call(this,e)}}function s(e){this._state=!1,this._value=e,l.call(this)}function l(){for(var e=0,t=this._deferreds.length;t>e;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function u(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(e){if(i)return;i=!0,n(e)}}var d=setTimeout,p="function"==typeof i&&i||function(e){d(e,1)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=this;return new a(function(i,a){r.call(n,new c(e,t,i,a))})},a.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new a(function(t,n){function i(r,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(r,e)},n)}e[r]=o,0==--a&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var a=e.length,r=0;r<e.length;r++)i(r,e[r])})},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var i=0,a=e.length;a>i;i++)e[i].then(t,n)})},a._setImmediateFn=function(e){p=e},e.exports?e.exports=a:t.Promise||(t.Promise=a)}(this),"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=new Uint8Array(a),o=0;o<a;o++)r[o]=i.charCodeAt(o);e(new Blob([r],{type:t||"image/png"}))}});var t,n,a,r=["Webkit","Moz","ms"],o=document.createElement("div").style,s=[1,8,3,6],l=[2,7,4,5];function c(e){if(e in o)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=r.length;n--;)if((e=r[n]+t)in o)return e}function u(e,t){for(var n in e=e||{},t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},u(e[n],t[n])):e[n]=t[n];return e}function d(e){return u({},e)}function p(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function h(e,t,n){if("string"==typeof t){var i=t;(t={})[i]=n}for(var a in t)e.style[a]=t[a]}function f(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function m(e,t){for(var n in t)e.setAttribute(n,t[n])}function v(e){return parseInt(e,10)}function g(e,t){var n=e.naturalWidth,i=e.naturalHeight,a=t||x(e);if(a&&a>=5){var r=n;n=i,i=r}return{width:n,height:i}}n=c("transform"),t=c("transformOrigin"),a=c("userSelect");var w={translate3d:{suffix:", 0px"},translate:{suffix:""}},y=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)};y.parse=function(e){return e.style?y.parse(e.style[n]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?y.fromMatrix(e):y.fromString(e)},y.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new y(v(t[4]),v(t[5]),parseFloat(t[0]))},y.fromString=function(e){var t=e.split(") "),n=t[0].substring(W.globals.translate.length+1).split(","),i=t.length>1?t[1].substring(6):1,a=n.length>1?n[0]:0,r=n.length>1?n[1]:0;return new y(a,r,i)},y.prototype.toString=function(){var e=w[W.globals.translate].suffix||"";return W.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var b=function(e){if(!e||!e.style[t])return this.x=0,void(this.y=0);var n=e.style[t].split(" ");this.x=parseFloat(n[0]),this.y=parseFloat(n[1])};function x(e){return e.exifdata&&e.exifdata.Orientation?v(e.exifdata.Orientation):1}function _(e,t,n){var i=t.width,a=t.height,r=e.getContext("2d");switch(e.width=t.width,e.height=t.height,r.save(),n){case 2:r.translate(i,0),r.scale(-1,1);break;case 3:r.translate(i,a),r.rotate(180*Math.PI/180);break;case 4:r.translate(0,a),r.scale(1,-1);break;case 5:e.width=a,e.height=i,r.rotate(90*Math.PI/180),r.scale(1,-1);break;case 6:e.width=a,e.height=i,r.rotate(90*Math.PI/180),r.translate(0,-a);break;case 7:e.width=a,e.height=i,r.rotate(-90*Math.PI/180),r.translate(-i,a),r.scale(1,-1);break;case 8:e.width=a,e.height=i,r.translate(0,i),r.rotate(-90*Math.PI/180)}r.drawImage(t,0,0,i,a),r.restore()}function E(){var e,i,r,o,s,l,c=this.options.viewport.type?"cr-vp-"+this.options.viewport.type:null;this.options.useCanvas=this.options.enableOrientation||C.call(this),this.data={},this.elements={},e=this.elements.boundary=document.createElement("div"),r=this.elements.viewport=document.createElement("div"),i=this.elements.img=document.createElement("img"),o=this.elements.overlay=document.createElement("div"),this.options.useCanvas?(this.elements.canvas=document.createElement("canvas"),this.elements.preview=this.elements.canvas):this.elements.preview=i,f(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),s=this.options.boundary.width,l=this.options.boundary.height,h(e,{width:s+(isNaN(s)?"":"px"),height:l+(isNaN(l)?"":"px")}),f(r,"cr-viewport"),c&&f(r,c),h(r,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),r.setAttribute("tabindex",0),f(this.elements.preview,"cr-image"),m(this.elements.preview,{alt:"preview","aria-grabbed":"false"}),f(o,"cr-overlay"),this.element.appendChild(e),e.appendChild(this.elements.preview),e.appendChild(r),e.appendChild(o),f(this.element,"croppie-container"),this.options.customClass&&f(this.element,this.options.customClass),function(){var e,t,i,r,o,s=this,l=!1;function c(e,t){var n=s.elements.preview.getBoundingClientRect(),i=o.y+t,a=o.x+e;s.options.enforceBoundary?(r.top>n.top+t&&r.bottom<n.bottom+t&&(o.y=i),r.left>n.left+e&&r.right<n.right+e&&(o.x=a)):(o.y=i,o.x=a)}function u(e){s.elements.preview.setAttribute("aria-grabbed",e),s.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function d(n){if((void 0===n.button||0===n.button)&&(n.preventDefault(),!l)){if(l=!0,e=n.pageX,t=n.pageY,n.touches){var i=n.touches[0];e=i.pageX,t=i.pageY}u(l),o=y.parse(s.elements.preview),window.addEventListener("mousemove",f),window.addEventListener("touchmove",f),window.addEventListener("mouseup",m),window.addEventListener("touchend",m),document.body.style[a]="none",r=s.elements.viewport.getBoundingClientRect()}}function f(a){a.preventDefault();var r=a.pageX,l=a.pageY;if(a.touches){var u=a.touches[0];r=u.pageX,l=u.pageY}var d=r-e,f=l-t,m={};if("touchmove"===a.type&&a.touches.length>1){var v=a.touches[0],g=a.touches[1],w=Math.sqrt((v.pageX-g.pageX)*(v.pageX-g.pageX)+(v.pageY-g.pageY)*(v.pageY-g.pageY));i||(i=w/s._currentZoom);var y=w/i;return M.call(s,y),void p(s.elements.zoomer)}c(d,f),m[n]=o.toString(),h(s.elements.preview,m),T.call(s),t=l,e=r}function m(){u(l=!1),window.removeEventListener("mousemove",f),window.removeEventListener("touchmove",f),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),document.body.style[a]="",k.call(s),I.call(s),i=0}s.elements.overlay.addEventListener("mousedown",d),s.elements.viewport.addEventListener("keydown",function(e){var t,l=37,u=38,d=39,p=40;if(!e.shiftKey||e.keyCode!==u&&e.keyCode!==p){if(s.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var f=function(e){switch(e){case l:return[1,0];case u:return[0,1];case d:return[-1,0];case p:return[0,-1]}}(e.keyCode);o=y.parse(s.elements.preview),document.body.style[a]="none",r=s.elements.viewport.getBoundingClientRect(),function(e){var t=e[0],r=e[1],l={};c(t,r),l[n]=o.toString(),h(s.elements.preview,l),T.call(s),document.body.style[a]="",k.call(s),I.call(s),i=0}(f)}}else t=e.keyCode===u?parseFloat(s.elements.zoomer.value)+parseFloat(s.elements.zoomer.step):parseFloat(s.elements.zoomer.value)-parseFloat(s.elements.zoomer.step),s.setZoom(t)}),s.elements.overlay.addEventListener("touchstart",d)}.call(this),this.options.enableZoom&&function(){var e=this,i=e.elements.zoomerWrap=document.createElement("div"),a=e.elements.zoomer=document.createElement("input");function r(){(function(e){var i=this,a=e?e.transform:y.parse(i.elements.preview),r=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),o=e?e.origin:new b(i.elements.preview);function s(){var e={};e[n]=a.toString(),e[t]=o.toString(),h(i.elements.preview,e)}if(i._currentZoom=e?e.value:i._currentZoom,a.scale=i._currentZoom,i.elements.zoomer.setAttribute("aria-valuenow",i._currentZoom),s(),i.options.enforceBoundary){var l=function(e){var t=this._currentZoom,n=e.width,i=e.height,a=this.elements.boundary.clientWidth/2,r=this.elements.boundary.clientHeight/2,o=this.elements.preview.getBoundingClientRect(),s=o.width,l=o.height,c=n/2,u=i/2,d=-1*(c/t-a),p=-1*(u/t-r),h=1/t*c,f=1/t*u;return{translate:{maxX:d,minX:d-(s*(1/t)-n*(1/t)),maxY:p,minY:p-(l*(1/t)-i*(1/t))},origin:{maxX:s*(1/t)-h,minX:h,maxY:l*(1/t)-f,minY:f}}}.call(i,r),c=l.translate,u=l.origin;a.x>=c.maxX&&(o.x=u.minX,a.x=c.maxX),a.x<=c.minX&&(o.x=u.maxX,a.x=c.minX),a.y>=c.maxY&&(o.y=u.minY,a.y=c.maxY),a.y<=c.minY&&(o.y=u.maxY,a.y=c.minY)}s(),j.call(i),I.call(i)}).call(e,{value:parseFloat(a.value),origin:new b(e.elements.preview),viewportRect:e.elements.viewport.getBoundingClientRect(),transform:y.parse(e.elements.preview)})}function o(t){var n,i;if("ctrl"===e.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;n=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,i=e._currentZoom+n*e._currentZoom,t.preventDefault(),M.call(e,i),r.call(e)}f(i,"cr-slider-wrap"),f(a,"cr-slider"),a.type="range",a.step="0.0001",a.value="1",a.style.display=e.options.showZoomer?"":"none",a.setAttribute("aria-label","zoom"),e.element.appendChild(i),i.appendChild(a),e._currentZoom=1,e.elements.zoomer.addEventListener("input",r),e.elements.zoomer.addEventListener("change",r),e.options.mouseWheelZoom&&(e.elements.boundary.addEventListener("mousewheel",o),e.elements.boundary.addEventListener("DOMMouseScroll",o))}.call(this),this.options.enableResize&&function(){var e,t,n,i,r,o,s,l=this,c=document.createElement("div"),u=!1,d=50;function p(o){if((void 0===o.button||0===o.button)&&(o.preventDefault(),!u)){var s=l.elements.overlay.getBoundingClientRect();if(u=!0,t=o.pageX,n=o.pageY,e=-1!==o.currentTarget.className.indexOf("vertical")?"v":"h",i=s.width,r=s.height,o.touches){var c=o.touches[0];t=c.pageX,n=c.pageY}window.addEventListener("mousemove",m),window.addEventListener("touchmove",m),window.addEventListener("mouseup",v),window.addEventListener("touchend",v),document.body.style[a]="none"}}function m(a){var o=a.pageX,s=a.pageY;if(a.preventDefault(),a.touches){var u=a.touches[0];o=u.pageX,s=u.pageY}var p=o-t,f=s-n,m=l.options.viewport.height+f,v=l.options.viewport.width+p;"v"===e&&m>=d&&m<=r?(h(c,{height:m+"px"}),l.options.boundary.height+=f,h(l.elements.boundary,{height:l.options.boundary.height+"px"}),l.options.viewport.height+=f,h(l.elements.viewport,{height:l.options.viewport.height+"px"})):"h"===e&&v>=d&&v<=i&&(h(c,{width:v+"px"}),l.options.boundary.width+=p,h(l.elements.boundary,{width:l.options.boundary.width+"px"}),l.options.viewport.width+=p,h(l.elements.viewport,{width:l.options.viewport.width+"px"})),T.call(l),N.call(l),k.call(l),I.call(l),n=s,t=o}function v(){u=!1,window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),document.body.style[a]=""}f(c,"cr-resizer"),h(c,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(f(o=document.createElement("div"),"cr-resizer-vertical"),c.appendChild(o)),this.options.resizeControls.width&&(f(s=document.createElement("div"),"cr-resizer-horisontal"),c.appendChild(s)),o&&(o.addEventListener("mousedown",p),o.addEventListener("touchstart",p)),s&&(s.addEventListener("mousedown",p),s.addEventListener("touchstart",p)),this.elements.boundary.appendChild(c)}.call(this)}function C(){return this.options.enableExif&&window.EXIF}function M(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=D(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),n)).toString()}}function k(e){var i=this._currentZoom,a=this.elements.preview.getBoundingClientRect(),r=this.elements.viewport.getBoundingClientRect(),o=y.parse(this.elements.preview.style[n]),s=new b(this.elements.preview),l=r.top-a.top+r.height/2,c=r.left-a.left+r.width/2,u={},d={};if(e){var p=s.x,f=s.y,m=o.x,v=o.y;u.y=p,u.x=f,o.y=m,o.x=v}else u.y=l/i,u.x=c/i,d.y=(u.y-s.y)*(1-i),d.x=(u.x-s.x)*(1-i),o.x-=d.x,o.y-=d.y;var g={};g[t]=u.x+"px "+u.y+"px",g[n]=o.toString(),h(this.elements.preview,g)}function T(){if(this.elements){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();h(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}}b.prototype.toString=function(){return this.x+"px "+this.y+"px"};var $,P,S,O,j=($=T,P=500,function(){var e=this,t=arguments,n=S&&!O;clearTimeout(O),O=setTimeout(function(){O=null,S||$.apply(e,t)},P),n&&$.apply(e,t)});function I(){var e,t=this.get();R.call(this)&&(this.options.update.call(this,t),this.$&&"undefined"==typeof Prototype?this.$(this.element).trigger("update.croppie",t):(window.CustomEvent?e=new CustomEvent("update",{detail:t}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,t),this.element.dispatchEvent(e)))}function R(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function L(){var e,i={},a=this.elements.preview,r=new y(0,0,1),o=new b,s=R.call(this);s&&!this.data.bound&&(this.data.bound=!0,i[n]=r.toString(),i[t]=o.toString(),i.opacity=1,h(a,i),e=this.elements.preview.getBoundingClientRect(),this._originalImageWidth=e.width,this._originalImageHeight=e.height,this.data.orientation=x(this.elements.img),this.options.enableZoom?N.call(this,!0):this._currentZoom=1,r.scale=this._currentZoom,i[n]=r.toString(),h(a,i),this.data.points.length?function(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var i=e[2]-e[0],a=this.elements.viewport.getBoundingClientRect(),r=this.elements.boundary.getBoundingClientRect(),o={left:a.left-r.left,top:a.top-r.top},s=a.width/i,l=e[1],c=e[0],u=-1*e[1]+o.top,d=-1*e[0]+o.left,p={};p[t]=c+"px "+l+"px",p[n]=new y(d,u,s).toString(),h(this.elements.preview,p),M.call(this,s),this._currentZoom=s}.call(this,this.data.points):function(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),i=this.elements.boundary.getBoundingClientRect(),a=t.left-i.left,r=t.top-i.top,o=a-(e.width-t.width)/2,s=r-(e.height-t.height)/2,l=new y(o,s,this._currentZoom);h(this.elements.preview,n,l.toString())}.call(this),k.call(this),T.call(this))}function N(e){var t,n,i,a,r=Math.max(this.options.minZoom,0)||0,o=this.options.maxZoom||1.5,s=this.elements.zoomer,l=parseFloat(s.value),c=this.elements.boundary.getBoundingClientRect(),u=g(this.elements.img,this.data.orientation),d=this.elements.viewport.getBoundingClientRect();this.options.enforceBoundary&&(i=d.width/u.width,a=d.height/u.height,r=Math.max(i,a)),r>=o&&(o=r+1),s.min=D(r,4),s.max=D(o,4),!e&&(l<s.min||l>s.max)?M.call(this,l<s.min?s.min:s.max):e&&(n=Math.max(c.width/u.width,c.height/u.height),t=null!==this.data.boundZoom?this.data.boundZoom:n,M.call(this,t)),p(s)}function F(e){var t=e.points,n=v(t[0]),i=v(t[1]),a=v(t[2]),r=v(t[3]),o=a-n,s=r-i,l=e.circle,c=document.createElement("canvas"),u=c.getContext("2d"),d=e.outputWidth||o,p=e.outputHeight||s;return c.width=d,c.height=p,e.backgroundColor&&(u.fillStyle=e.backgroundColor,u.fillRect(0,0,d,p)),sx=n,sy=i,sWidth=o,sHeight=s,dx=0,dy=0,dWidth=d,dHeight=p,n<0&&(sx=0,dx=Math.abs(n)/o*d),sWidth+sx>this._originalImageWidth&&(sWidth=this._originalImageWidth-sx,dWidth=sWidth/o*d),i<0&&(sy=0,dy=Math.abs(i)/s*p),sHeight+sy>this._originalImageHeight&&(sHeight=this._originalImageHeight-sy,dHeight=sHeight/s*p),u.drawImage(this.elements.preview,sx,sy,sWidth,sHeight,dx,dy,dWidth,dHeight),l&&(u.fillStyle="#fff",u.globalCompositeOperation="destination-in",u.beginPath(),u.arc(c.width/2,c.height/2,c.width/2,0,2*Math.PI,!0),u.closePath(),u.fill()),c}function H(e,t){var n,i,a,r,o=this,s=[],l=null,c=C.call(o);if("string"==typeof e)n=e,e={};else if(Array.isArray(e))s=e.slice();else{if(void 0===e&&o.data.url)return L.call(o),I.call(o),null;n=e.url,s=e.points||[],l=void 0===e.zoom?null:e.zoom}return o.data.bound=!1,o.data.url=n||o.data.url,o.data.boundZoom=l,(i=n,a=c,r=new Image,r.style.opacity="0",new Promise(function(e,t){function n(){r.style.opacity="1",setTimeout(function(){e(r)},1)}r.removeAttribute("crossOrigin"),i.match(/^https?:\/\/|^\/\//)&&r.setAttribute("crossOrigin","anonymous"),r.onload=function(){a?EXIF.getData(r,function(){n()}):n()},r.onerror=function(e){r.style.opacity=1,setTimeout(function(){t(e)},1)},r.src=i})).then(function(n){if(function(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(t){e.classList.add(t)}),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}.call(o,n),s.length)o.options.relative&&(s=[s[0]*n.naturalWidth/100,s[1]*n.naturalHeight/100,s[2]*n.naturalWidth/100,s[3]*n.naturalHeight/100]);else{var i,a,r=g(n),l=o.elements.viewport.getBoundingClientRect(),c=l.width/l.height,u=r.width/r.height;u>c?(a=r.height,i=a*c):(i=r.width,a=r.height/c);var d=(r.width-i)/2,p=(r.height-a)/2,h=d+i,f=p+a;o.data.points=[d,p,h,f]}o.data.points=s.map(function(e){return parseFloat(e)}),o.options.useCanvas&&function(e){var t=this.elements.canvas,n=this.elements.img;t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=n.width,t.height=n.height;var i=this.options.enableOrientation&&e||x(n);_(t,n,i)}.call(o,e.orientation),L.call(o),I.call(o),t&&t()})}function D(e,t){return parseFloat(e).toFixed(t||0)}function A(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),n=t.left-e.left,i=t.top-e.top,a=(t.width-this.elements.viewport.offsetWidth)/2,r=(t.height-this.elements.viewport.offsetHeight)/2,o=n+this.elements.viewport.offsetWidth+a,s=i+this.elements.viewport.offsetHeight+r,l=this._currentZoom;(l===1/0||isNaN(l))&&(l=1);var c=this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return n=Math.max(c,n/l),i=Math.max(c,i/l),o=Math.max(c,o/l),s=Math.max(c,s/l),{points:[D(n),D(i),D(o),D(s)],zoom:l,orientation:this.data.orientation}}var z={type:"canvas",format:"png",quality:1},B=["jpeg","webp","png"];if(window.jQuery){var Z=window.jQuery;Z.fn.croppie=function(e){var t=typeof e;if("string"===t){var n=Array.prototype.slice.call(arguments,1),i=Z(this).data("croppie");return"get"===e?i.get():"result"===e?i.result.apply(i,n):"bind"===e?i.bind.apply(i,n):this.each(function(){var t=Z(this).data("croppie");if(t){var i=t[e];if(!Z.isFunction(i))throw"Croppie "+e+" method not found";i.apply(t,n),"destroy"===e&&Z(this).removeData("croppie")}})}return this.each(function(){var t=new W(this,e);t.$=Z,Z(this).data("croppie",t)})}}function W(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=u(d(W.defaults),t),"img"===this.element.tagName.toLowerCase()){var n=this.element;f(n,"cr-original-image"),m(n,{"aria-hidden":"true",alt:""});var i=document.createElement("div");this.element.parentNode.appendChild(i),i.appendChild(n),this.element=i,this.options.url=this.options.url||n.src}if(E.call(this),this.options.url){var a={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,H.call(this,a)}}return W.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},W.globals={translate:"translate3d"},u(W.prototype,{bind:function(e,t){return H.call(this,e,t)},get:function(){var e=A.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return function(e){var t=this,n=A.call(t),i=u(d(z),d(e)),a="string"==typeof e?e:i.type||"base64",r=i.size||"viewport",o=i.format,s=i.quality,l=i.backgroundColor,c="boolean"==typeof i.circle?i.circle:"circle"===t.options.viewport.type,p=t.elements.viewport.getBoundingClientRect(),m=p.width/p.height;return"viewport"===r?(n.outputWidth=p.width,n.outputHeight=p.height):"object"==typeof r&&(r.width&&r.height?(n.outputWidth=r.width,n.outputHeight=r.height):r.width?(n.outputWidth=r.width,n.outputHeight=r.width/m):r.height&&(n.outputWidth=r.height*m,n.outputHeight=r.height)),B.indexOf(o)>-1&&(n.format="image/"+o,n.quality=s),n.circle=c,n.url=t.data.url,n.backgroundColor=l,new Promise(function(e){switch(a.toLowerCase()){case"rawcanvas":e(F.call(t,n));break;case"canvas":case"base64":e(function(e){return F.call(this,e).toDataURL(e.format,e.quality)}.call(t,n));break;case"blob":(function(e){var t=this;return new Promise(function(n){F.call(t,e).toBlob(function(e){n(e)},e.format,e.quality)})}).call(t,n).then(e);break;default:e(function(e){var t=e.points,n=document.createElement("div"),i=document.createElement("img"),a=t[2]-t[0],r=t[3]-t[1];return f(n,"croppie-result"),n.appendChild(i),h(i,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),i.src=e.url,h(n,{width:a+"px",height:r+"px"}),n}.call(t,n))}})}.call(this,e)},refresh:function(){return function(){L.call(this)}.call(this)},setZoom:function(e){M.call(this,e),p(this.elements.zoomer)},rotate:function(e){(function(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t,n,i,a,r,o=this.elements.canvas;this.data.orientation=(t=this.data.orientation,n=e,i=s.indexOf(t)>-1?s:l,a=i.indexOf(t),r=n/90%i.length,i[(i.length+a+r%i.length)%i.length]),_(o,this.elements.img,this.data.orientation),k.call(this,!0),N.call(this)}).call(this,e)},destroy:function(){return function(){var e,t;this.element.removeChild(this.elements.boundary),e=this.element,t="croppie-container",e.classList?e.classList.remove(t):e.className=e.className.replace(t,""),this.options.enableZoom&&this.element.removeChild(this.elements.zoomerWrap),delete this.elements}.call(this)}}),W})?a.call(t,n,t,e):a)||(e.exports=r)}).call(this,n(26).setImmediate)},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(27),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,a,r,o,s,l=1,c={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){r.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(o+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[l]=a,i(l),l++},p.clearImmediate=h}function h(e){delete c[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(28))},function(e,t){var n,i,a=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}]);