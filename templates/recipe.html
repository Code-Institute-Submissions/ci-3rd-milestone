{% extends "base.html" %}


<!-- Page content block -->
{% block content %}
<div class="container white recipe-container">
  <div class="row">
    <div class="col s12 m9 title">
      <h3>{{title}}</h3>
    </div>
    {% if owner %}
    <div class="col s12 m3 title">
      <a href="?edit=true" class="waves-effect waves-yellow btn-flat" onclick="atob">edit</a>
      <a href="javascript:void(0);" class="red-text waves-effect waves-red btn-flat"
        onclick="TE.deleteRecipe({{ id }})">delete</a>
    </div>
    {% endif %}
  </div>

  <div class="row">
    <div class="col m12 l5">
      <img class="responsive-img" width="300" height="400" src="/{{ image_path }}">
    </div>
    <div class="col m12 l7">
      <div class="row">
        <div class="col s12 m2"><strong>Author</strong></div>
        <div class="col s12 m10">{{firstname}} {{lastname}}</div>
      </div>
      <div class="row">
        <div class="col s12 m2"><strong>Date</strong></div>
        <div class="col s12 m10">{{date}}</div>
      </div>
      <div class="row">
        <div class="col s12 m2"><strong>Views</strong></div>
        <div class="col s12 m10">{{views}}</div>
      </div>
      <div class="row">
        <div class="col s12 m2"><strong>Rating</strong></div>
        <div class="col s12 m10">-</div>
      </div>
      <div class="row" style="margin-top:3rem">
        <div class="col s12"><strong>Description</strong></div>
        <div class="col s12">{{description}}</div>
      </div>
    </div>
  </div>
  <div class="row" style="margin-top: 3rem;">
    <div class="col s12"><strong>Recipe</strong></div>
    <div class="col s12">{{recipe}}</div>
  </div>
  <div class="row" style="margin-top: 3rem;">
    <div class="col s12"><strong>Ingredients</strong></div>
    {% for ingredient in ingredients %}
    <div class="col s12"><span>&mdash;&emsp;{{ ingredient}}</span></div>
    {% endfor %}
  </div>

  <div class="row">
    <div class="col s12">
      <h5 class="center-align">Comments</h5>
    </div>
  </div>
  <div class="row">
    <div class="ruler"></div>
  </div>
  <div class="row">
    <div class="comment-container">
      {% if commentsAvailable %}
      {% for comment in comments %}
      <div class="comment">
        <div class="comment-user">
          <img class="responsive-img" width="50" src="/{{ comment.image_path }}">
          <div>{{comment.firstname}}</div>
          <div>{{comment.lastname}}</div>
        </div>
        <div class="comment-message">
          <div>{{ comment.date }}</div>
          <div>{{ comment.message }}</div>
          {% if comment.owner %}
          <div class="delete-action">
            <a href="javascript:void(0);" onclick="TE.deleteComment({{comment.id}})">
              <i class="material-icons grey-text">delete</i>
            </a>
          </div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
      {% else %}
      <div class="comment">
        <em>Be the first one to write a comment!</em>
      </div>
      {% endif%}
    </div>
  </div>
  <div class="row">
    <div class="input-comment-container">
      <form id="commentForm" class="comment-form" action="/comment/{{ id }}" method="POST">
        <div class="comment-textarea">
          <label for="textarea1">New comment</label>
          <textarea id="textarea1" class="comment-textarea-input" name="comment" data-length="500"></textarea>
        </div>
        <input type="button" value="Submit" onclick="TE.postComment(this)" class="btn btn-small grey darken-1">
      </form>
    </div>
  </div>


</div>
{% endblock %}

<!-- Custom script block -->
{% block script %}
<script>
  $(document).ready(function () {
    $('textarea#textarea1').characterCounter();
  });

</script>
{% endblock %}